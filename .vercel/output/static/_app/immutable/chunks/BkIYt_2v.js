import"./CWj6FrbW.js";import{i as w}from"./yYI0xxPb.js";import{p as E,o as M,m as o,n as l,q as e,v,w as _,x as S,f as q,y as A,z as O,b as P,c as $}from"./dFMN_GVM.js";import{a as j,C as k}from"./_2SifPp6.js";import{b as B}from"./DBPYeusg.js";import{l as h,p as i}from"./BrFr0L3w.js";var D=q("<img/>");function Q(b,t){const c=h(t,["children","$$slots","$$events","$$legacy"]),y=h(c,["placeholder","src","alt","options"]);E(t,!1);const g=l();let u=i(t,"placeholder",8),p=i(t,"src",8),x=i(t,"alt",8),z=i(t,"options",24,()=>({root:null,rootMargin:"0px 0px 0px 0px",threshold:0})),s=l(),f=l(),n,m=l(!1),d=l(!1);M(()=>(n=new IntersectionObserver((r,C)=>{r.forEach(I=>{I.isIntersecting&&(o(m,!0),C.unobserve(e(s)))})},z()),n.observe(e(s)),()=>{n&&n.unobserve(e(s))}));function L(){!e(d)&&e(f)===p()&&o(d,!0)}v(()=>(e(m),_(p()),_(u())),()=>{o(f,e(m)?p():u())}),v(()=>_(c),()=>{o(g,c.class||"")}),S(),w();var a=D();j(a,r=>({src:e(f),alt:x(),...y,class:`svelte-lazy-image ${e(g)??""}`,[k]:r}),[()=>({"svelte-lazy-image--loaded":e(d)})]),B(a,r=>o(s,r),()=>e(s)),A(a),O("load",a,L),P(b,a),$()}export{Q as L};
